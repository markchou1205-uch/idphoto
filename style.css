:root { --sidebar-icon-width: 80px; --sidebar-panel-width: 340px; --primary-color: #0d6efd; }
body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; height: 100vh; overflow: hidden; }

/* Sidebars & Cards (保持不變) */
#sidebar-icons { width: var(--sidebar-icon-width); min-width: var(--sidebar-icon-width); z-index: 1020; }
.nav-item-icon { width: 100%; padding: 15px 0; cursor: pointer; color: rgba(255,255,255,0.5); transition: all 0.2s; }
.nav-item-icon:hover { color: white; background: rgba(255,255,255,0.1); }
.nav-item-icon.active { color: #fff; background: var(--primary-color); }
.nav-item-icon i { font-size: 1.6rem; display: block; margin-bottom: 4px; }
.nav-item-icon span { font-size: 11px; }
#sidebar-panels { width: var(--sidebar-panel-width); min-width: var(--sidebar-panel-width); z-index: 1010; background: #fff; box-shadow: 2px 0 5px rgba(0,0,0,0.05); }
.feature-card { cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; }
.feature-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important; }
.icon-circle { width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 1.8rem; }
.spec-card { border: 1px solid #dee2e6; border-radius: 8px; padding: 10px 15px; cursor: pointer; transition: all 0.2s; background: white; display: flex; justify-content: space-between; align-items: center; }
.spec-card:hover { border-color: var(--primary-color); background: #f1f8ff; }
.spec-card.active { border-color: var(--primary-color); background: #e7f1ff; border-left: 4px solid var(--primary-color); }

/* --- Image Viewer (簡化版) --- */

#workspace-area {
    display: flex !important;
    align-items: center; justify-content: center;
    background-color: #2c2c2c;
    overflow: hidden; 
    position: relative;
}

.image-wrapper { 
    position: relative !important; 
    display: block; 
    margin-top: 0; /* 移除偏移，完全置中 */
    background: #000;
    box-shadow: 0 0 100px rgba(0,0,0,0.8);
    border: 1px solid rgba(255,255,255,0.2);
    overflow: hidden; /* 關鍵：裁掉框外內容，模擬最終結果 */
}

/* 圖片：由 JS 自動定位，不允許用戶移動 */
.image-wrapper img { 
    display: block; 
    position: absolute; 
    top: 0; left: 0;
    transform-origin: 0 0; 
    pointer-events: none; 
    transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1); /* 平滑過渡效果 */
}

/* 遮罩：現在只作為視覺參考線 */
.crop-mask { 
    position: absolute; 
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none; 
    z-index: 10; 
    /* 移除黑色暗角 (因為 wrapper 已經 overflow:hidden)，只留紅框 */
    border: 2px dashed #ff3333; 
}

.mask-label { 
    position: absolute; bottom: 10px; right: 10px;
    background: rgba(255, 50, 50, 0.9); color: white; 
    padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;
}

/* 輔助線 */
.guide-line {
    position: absolute; left: 0; width: 100%;
    border-top: 2px solid #00c3ff;
    box-shadow: 0 1px 2px rgba(0,0,0,0.5); 
    opacity: 0.6;
}
.guide-line span {
    background: #00c3ff; color: #000;
    font-size: 10px; padding: 1px 4px; border-radius: 0 0 0 4px;
    float: right; font-weight: bold;
}
/* 隱藏裁切紅框與遮罩 */
.crop-mask {
    display: none !important;
    border: none !important;
}

/* 隱藏縮放工具列 */
#zoom-toolbar {
    display: none !important;
}

/* 隱藏所有階段的縮放控制項 (若有其他 class) */
.zoom-controls, .range-slider {
    display: none !important;
}
/* 強制覆蓋：預覽區背景設為白色，並使用 Flexbox 居中 */
.image-wrapper {
    background-color: #ffffff !important; /* 解決黑底問題 */
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    overflow: hidden !important;
    border: 1px solid #eee !important; /* 淡淡的灰框就好 */
}

/* 圖片強制填滿且保持比例 */
.image-wrapper img {
    width: 100% !important;
    height: 100% !important;
    object-fit: contain !important; /* 改為 contain 確保整張圖都看得到 */
    transform: none !important; /* 移除 JS 的位移干擾 */
    background-color: white !important;
}
/* Misc */
.result-btn { cursor: pointer; transition: 0.2s; background: #fff; }
.result-btn.active { border-color: var(--primary-color) !important; background: #e7f1ff; }
.loading-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.95); z-index: 2000; display: none; flex-direction: column; align-items: center; justify-content: center; }
.animate-fade { animation: fadeIn 0.4s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
/* Sidebar Avatar */
.user-avatar-container {
    cursor: pointer;
    position: relative;
    transition: transform 0.2s;
}
.user-avatar-container:hover {
    transform: scale(1.1);
}

/* Animations */
.animate-fade { animation: fadeIn 0.5s; }
.animate-slide-in { animation: slideInRight 0.3s forwards; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }

/* Pricing Cards */
.pricing-card {
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    border: 1px solid #ddd;
}
.pricing-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    border-color: #ffc107;
}
.pricing-card.best-value {
    border: 2px solid #ffc107;
    position: relative;
    overflow: hidden;
}
.pricing-card.best-value::after {
    content: "熱門";
    position: absolute;
    top: 15px; right: -30px;
    background: #ffc107;
    color: black;
    padding: 5px 30px;
    transform: rotate(45deg);
    font-size: 12px;
    font-weight: bold;
}
